@page
@inject UserManager<User> UserManager

@using myArchery.Services
@using myArchery.Services.TmpClasses
@model myArchery.Pages.LiveRankingModel
@{
	if (User.Identity == null)
	{
		RedirectToPage("/Account/Login");
	}

	var events = EventService.GetUsersCurrentEventsByUsername(User.Identity?.Name);

	if (events.Count == 0)
	{
		RedirectToPage("Index");
	}

	var users = EventService.GetUsersWithPointsFromEventById(events[0].Id);

	var repheight = 400 / 5 * users.Count() + "px";

	double maxPoints = 50;
	
}
<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Leader Board using HTML CSS and Javascript</title>
	<link rel="stylesheet" href="~/assets/js/style.css">

</head>
<body>
<div class="wrapper">
	<div class="lboard_section" style="height:@repheight">
		<div class="lboard_tabs">
			<div class="tabs">
				<ul>
					<li data-li="today">Today</li>
					<li class="active" data-li="month">Month</li>
					<li data-li="year">Year</li>
				</ul>
			</div>
		</div>
		
				<div class="lboard_wrap" style="height:@repheight">
			<div class="lboard_item today" style="display: none;">
@foreach (var item in users) {
				int counter = 1;

						string value =  @Math.Floor(item.Points / maxPoints * 100) + "%" ;		//max value berücksichtigen Max Wert/aktuelle Punkte


				<div class="lboard_mem">
	<div class="img">
		<img src="~/assets/img/icons/login_icon.png" alt="standardpic">
	</div>
	<div class="name_bar">
						<p><span> @counter.</span> @item.Username </p>
		<div class="bar_wrap">
			<div class="inner_bar" style="width: @value"></div>
			</div>
		</div>
		<div class="points">
						@item.Points
		</div>
	</div>

				<div>

				</div>
				
					counter++;
				
			}
		</div>
</div>
		
	</div>
</div>	

<script src="~/assets/js/liveranking.js"></script>
</body>
</html>