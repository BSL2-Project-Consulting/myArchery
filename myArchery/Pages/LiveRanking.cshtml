@page
@inject UserManager<AspNetUser> UserManager

@using myArchery.Services
@using myArchery.Services.TmpClasses
@model myArchery.Pages.LiveRankingModel
@{
    var eventid = EventService.GetUsersCurrentEventsByUsername(User.Identity.Name)[0];

}




    <!DOCTYPE html>
    <!-- HEADER -->
    <partial name="_HeaderPartial">
    <html lang="en">
    <head>

    <!-- Favicons -->
    <link href="assets/img/logo/logo_archery.png" rel="icon">

    <!-- Google Fonts -->
    <link
        href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Krub:300,300i,400,400i,500,500i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i"
        rel="stylesheet">

    <!-- Vendor CSS Files -->
    <link href="assets/vendor/aos/aos.css" rel="stylesheet">
    <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
    <link href="assets/vendor/boxicons/css/boxicons.min.css " rel="stylesheet">
    <link href="assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
    <link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">

    <!-- Template Main CSS File -->
    <link href="assets/css/style.css" rel="stylesheet">

    <!-- Navbar Login Form Input -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>


    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Live Crypto </title>
    <!-- load in bulma style sheet -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.2/css/bulma.min.css">
    <link href="../wwwroot/assets/css/archery-loginForm.css" rel="stylesheet">

    <link rel="stylesheet" href="index.css">
    <script src="index.js"></script>
    <title>Document</title>

    </head>

    <!-- insert css here -->
    <style>
        * {
    margin:0;
    padding:0;
    font-family:Helvetica, Arial, sans-serif;
  }
  body {
    background:#232323;
  }
  input[type=text], textarea, input[type=email], input[type=password], input[type=tel], input[type=url], input[type=search], input[type=date] {
      padding: 10px;
      width: 100%;
      font-size: 14px;
      font-family: inherit;
      line-height: 24px;
      color: #555;
      background-color: #f1f1f1;
      border: none;
      transition: all 0.2s ease;
      -webkit-transition: all 0.2s ease;
  }
  input[type=text], textarea, input[type=email], input[type=password], input[type=tel], input[type=url], input[type=search], input[type=date], .material.woocommerce-page[data-form-style="default"] input#coupon_code {
      background-color: rgba(0,0,0,0.1);
      border-radius: 4px;
      border: 2px solid rgba(0,0,0,0);
  }
  /* /end Codepen Specific */
  /* Ladder Navigation */
    #leaderboard {
        padding:50px;
    }
    .ladder-nav {
        display:flex;
        flex-wrap:wrap;
        align-items: center;
        background:#5055CB;
        padding:10px 25px;
        border-radius:10px;
        border:1px solid #686EF9;
    }
    .ladder-title {
      flex:2;
    }
    .ladder-search {
      flex:1;
      padding-right:25px;
    }
    .ladder-title {
      font-size:20px;
      color:#888DFF!important;
      font-weight:bold;
      text-transform:uppercase;
    }
    .ladder-search input {
        color:white
    }
    .ladder-search input::-webkit-input-placeholder { /* Chrome/Opera/Safari */
        color: #888DFF;
    }
    .ladder-search input::-moz-placeholder { /* Firefox 19+ */
        color: #888DFF;
    }
    .ladder-search input:-ms-input-placeholder { /* IE 10+ */
        color: #888DFF;
    }
    .ladder-search input:-moz-placeholder { /* Firefox 18- */
        color: #888DFF;
    }
  /* /end Ladder Navigation */
  /* Leaderboard Results */
  .leaderboard-results {
    text-align:left;
    border-collapse: collapse;
  }
  .leaderboard-results thead th {
    padding: 25px;
    color:#747474;
    font-size:14px;
    font-weight:bold;
  }
  .leaderboard-results tbody td {
    padding:15px 25px;
    background:#1a1a1a;
    font-size:16px;
    border-bottom:5px solid #232323;
  }
  .leaderboard-results tbody td:nth-of-type(7) {
    font-weight:bold;
  }
  .leaderboard-results tbody tr:hover td {
      background:#1d1d1d;
  }
  .leaderboard-results tbody tr {
    color:#747474;
  }
  .leaderboard-results tbody tr:first-child {
    color:#686EF9;
  }
  .leaderboard-results tbody span {
    font-weight:bold;
    padding:10px 15px;
    border-radius:50%;
  }
  .leaderboard-results tbody tr:first-child span {
    background:#5055CB;
    color:white;
  }
  .leaderboard-results tbody tr span {
    background:#262626;
    color:#747474;
  }
  /* /end Leaderboard Results */
    </style>




</head>
<body><div class="container-wrap">
	<section id="leaderboard">
		<nav class="ladder-nav">
			<div class="ladder-title">
			<h1>Standings</h1>
			</div>
			<div class="ladder-search">
				<input type="text" id="search-leaderboard" class="live-search-box" placeholder="Search Team, Player..." />
			</div>
		</nav>
		<table id="rankings" class="leaderboard-results" width="100%">
			<thead>
				<tr>
					<th>Rank</th>
					<th>Team</th>
					<th>Points</th>
                </tr>
			</thead>
			<tbody>
				<!-- Load SCRIMcom Leaderboard Ranings -->
			</tbody>
		</table>
	</section>

    
</body>



</html>
    <!-- load in jquery script to use jquery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
    
    <!-- main script -->
    <script>


        const rankingsBody = document.querySelector("#rankings > tbody");


window.setInterval(function loadRankings () {
    const request = new XMLHttpRequest();

    $.ajax({
        url:'Liveranking/GetLiverankingDataAsJson/'
    })

    request.open("get", "https://localhost:7189/assets/js/datas.js");       //Link der JS Datei, localhost://6505\my
    request.onload = () => {
        try {
            const json = JSON.parse(request.responseText);
            populateRankings(json);
        } catch (e) {
            console.warn("Could not load Player Rankings! :(");
        }
    };

    request.send();


}, 5000);

function populateRankings (json) {
    // Populate Leaderboard
    json.forEach((row) => {
        const tr = document.createElement("tr");

        row.forEach((cell) => {
            const td = document.createElement("td");
            td.textContent = cell;
            tr.appendChild(td);
        });

        rankingsBody.appendChild(tr);
    });
}

document.addEventListener("DOMContentLoaded", () => { loadRankings (); });

$("#search-leaderboard").keyup(function() {
    var value = this.value;

    $("table").find("tr").each(function(index) {
        if (index === 0) return;

        var if_td_has = false;
        $(this).find('td').each(function () {
            if_td_has = if_td_has || $(this).text().indexOf(value) !== -1; //Check if td's text matches key and then use OR to check it for all td's
        });

        $(this).toggle(if_td_has);

    });
}); 



    </script>
   
</body>
</html>

